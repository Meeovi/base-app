import { createMcpHandler } from "agents/mcp";
import { toWebRequest } from "h3";
import { createMcpTransportHandler } from "./types.js";
const fallbackCtx = {
  waitUntil: () => {
  },
  passThroughOnException: () => {
  }
};
export default createMcpTransportHandler((server, event) => {
  const handler = createMcpHandler(server);
  const request = toWebRequest(event);
  const cf = event.context.cloudflare;
  return handler(request, cf?.env ?? {}, cf?.ctx ?? fallbackCtx);
});
