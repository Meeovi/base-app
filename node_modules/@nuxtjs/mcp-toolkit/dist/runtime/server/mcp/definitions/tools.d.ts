import type { ZodRawShape } from 'zod';
import type { CallToolResult, ServerRequest, ServerNotification, ToolAnnotations } from '@modelcontextprotocol/sdk/types.js';
import type { RequestHandlerExtra } from '@modelcontextprotocol/sdk/shared/protocol.js';
import type { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import type { ShapeOutput } from '@modelcontextprotocol/sdk/server/zod-compat.js';
import { type MsCacheDuration, type McpCacheOptions, type McpCache } from './cache.js';
export type { MsCacheDuration };
export type McpToolCacheOptions<Args = unknown> = McpCacheOptions<Args>;
export type McpToolCache<Args = unknown> = McpCache<Args>;
/**
 * Handler callback type for MCP tools
 */
export type McpToolCallback<Args extends ZodRawShape | undefined = ZodRawShape> = Args extends ZodRawShape ? (args: ShapeOutput<Args>, extra: RequestHandlerExtra<ServerRequest, ServerNotification>) => CallToolResult | Promise<CallToolResult> : (extra: RequestHandlerExtra<ServerRequest, ServerNotification>) => CallToolResult | Promise<CallToolResult>;
/**
 * MCP tool definition structure
 * @see https://mcp-toolkit.nuxt.dev/core-concepts/tools
 */
export interface McpToolDefinition<InputSchema extends ZodRawShape | undefined = ZodRawShape, OutputSchema extends ZodRawShape = ZodRawShape> {
    name?: string;
    title?: string;
    description?: string;
    inputSchema?: InputSchema;
    outputSchema?: OutputSchema;
    annotations?: ToolAnnotations;
    _meta?: Record<string, unknown>;
    handler: McpToolCallback<InputSchema>;
    /**
     * Cache configuration for the tool response
     * - string: Duration parsed by `ms` (e.g., '1h', '2 days', '30m')
     * - number: Duration in milliseconds
     * - object: Full cache options with getKey, group, swr, etc.
     * @see https://nitro.build/guide/cache#options
     */
    cache?: McpToolCache<InputSchema extends ZodRawShape ? ShapeOutput<InputSchema> : undefined>;
}
/**
 * Register a tool from a McpToolDefinition
 * @internal
 */
export declare function registerToolFromDefinition(server: McpServer, tool: McpToolDefinition): import("@modelcontextprotocol/sdk/server/mcp.js").RegisteredTool;
/**
 * Define an MCP tool that will be automatically registered.
 *
 * `name` and `title` are auto-generated from filename if not provided.
 *
 * @see https://mcp-toolkit.nuxt.dev/core-concepts/tools
 *
 * @example
 * ```ts
 * export default defineMcpTool({
 *   description: 'Echo back a message',
 *   inputSchema: { message: z.string() },
 *   cache: '1h', // optional caching
 *   handler: async ({ message }) => ({
 *     content: [{ type: 'text', text: message }]
 *   })
 * })
 * ```
 */
export declare function defineMcpTool<const InputSchema extends ZodRawShape | undefined = ZodRawShape, const OutputSchema extends ZodRawShape = ZodRawShape>(definition: McpToolDefinition<InputSchema, OutputSchema>): McpToolDefinition<InputSchema, OutputSchema>;
