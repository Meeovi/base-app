import { defineCachedFunction } from "nitropack/runtime";
import ms from "ms";
export function parseCacheDuration(duration) {
  if (typeof duration === "number") {
    return duration;
  }
  const parsed = ms(duration);
  if (parsed === void 0) {
    throw new Error(`Invalid cache duration: ${duration}`);
  }
  return Math.ceil(parsed / 1e3);
}
export function createCacheOptions(cache, name, defaultGetKey) {
  if (typeof cache === "object") {
    return {
      getKey: defaultGetKey,
      ...cache,
      maxAge: parseCacheDuration(cache.maxAge),
      name: cache.name ?? name,
      group: cache.group ?? "mcp"
    };
  }
  return {
    maxAge: parseCacheDuration(cache),
    name,
    group: "mcp",
    getKey: defaultGetKey
  };
}
export function wrapWithCache(fn, cacheOptions) {
  return defineCachedFunction(
    fn,
    cacheOptions
  );
}
