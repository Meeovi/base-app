"use strict";const x="app.grapesjs.com",L="app-stage.grapesjs.com",z="app2.grapesjs.com",P="app-stage2.grapesjs.com",$=[x,z,L,P,"localhost","127.0.0.1",".local-credentialless.webcontainer.io",".local.webcontainer.io","-sandpack.codesandbox.io"],B="license:check:start",D="license:check:end",G=()=>typeof window<"u",V=({isDev:e,isStage:t})=>`${e?"":`https://${t?L:x}`}/api`,U=()=>{const e=G()&&window.location.hostname;return!!e&&($.includes(e)||$.some(t=>e.endsWith(t)))};async function j({path:e,baseApiUrl:t,method:n="GET",headers:s={},params:c,body:i}){const m=`${t||V({isDev:!1,isStage:!1})}${e}`,a={method:n,headers:{"Content-Type":"application/json",...s}};i&&(a.body=JSON.stringify(i));const r=c?new URLSearchParams(c).toString():"",o=r?`?${r}`:"",l=await fetch(`${m}${o}`,a);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return l.json()}var b=(e=>(e.free="free",e.startup="startup",e.business="business",e.enterprise="enterprise",e))(b||{});const E={[b.free]:0,[b.startup]:10,[b.business]:20,[b.enterprise]:30};function K(e){const t=e;return t.init=n=>s=>e(s,n),t}const R=e=>K(e);async function W({editor:e,plan:t,pluginName:n,licenseKey:s,cleanup:c}){let i="",d=!1;const m=U(),a=o=>{console.warn("Cleanup plugin:",n,"Reason:",o),c()},r=(o={})=>{var w;const{error:l,sdkLicense:f}=o,g=(w=o.plan)==null?void 0:w.category;if(!(f||o.license)||l)a(l||"Invalid license");else if(g){const N=E[t],_=E[g];N>_&&a({pluginRequiredPlan:t,licensePlan:g})}};e.on(B,o=>{i=o==null?void 0:o.baseApiUrl,d=!0}),e.on(D,o=>{r(o)}),setTimeout(async()=>{if(!d){if(m)return;if(s){const o=await F({licenseKey:s,pluginName:n,baseApiUrl:i});o&&r(o)}else a("The `licenseKey` option not provided")}},2e3)}async function F(e){const{licenseKey:t,pluginName:n,baseApiUrl:s}=e;try{return(await j({baseApiUrl:s,path:`/sdk/${t||"na"}`,method:"POST",params:{d:window.location.hostname,pn:n}})).result||{}}catch(c){return console.error("Error during SDK license check:",c),!1}}const A=e=>t=>{var n;return((n=t.getAttribute)==null?void 0:n.call(t,T))===e},O=(...e)=>t=>e.some(n=>t.is(n)),Y=(...e)=>(t,n)=>e.some(s=>n.is(s)),C="gjs-plg-",T="data-type-role",p="accordion",q=`${p}-group`,u=`${p}-header`,h=`${p}-content`,y=`${p}-marker`,M=`${C}${u}`,k=`${C}${y}`,Z=`${C}${h}`,S=`${k}-open`,v={accordion:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M5.616 20q-.691 0-1.153-.462T4 18.384V5.616q0-.691.463-1.153T5.616 4h12.769q.69 0 1.153.463T20 5.616v12.769q0 .69-.462 1.153T18.384 20zm0-1h12.769q.23 0 .423-.192t.192-.424V8.154H5v10.23q0 .232.192.424t.423.192"/></svg>',accordionGroup:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.116 16h10.769q.23 0 .423-.192t.192-.423V6h-12v9.385q0 .23.192.423t.423.192m0 1q-.69 0-1.153-.462T6.5 15.385V4.615q0-.69.463-1.153T8.116 3h10.769q.69 0 1.153.462t.462 1.153v10.77q0 .69-.462 1.152T18.884 17zm-3 3q-.69 0-1.153-.462T3.5 18.385V6.615h1v11.77q0 .23.192.423t.423.192h11.77v1zM7.5 4v12z"/></svg>',accordionHeader:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M5.616 20q-.691 0-1.153-.462T4 18.384V5.616q0-.691.463-1.153T5.616 4h12.769q.69 0 1.153.463T20 5.616v12.769q0 .69-.462 1.153T18.384 20zm0-1h12.769q.23 0 .423-.192t.192-.424V5.616q0-.231-.192-.424T18.384 5H5.616q-.231 0-.424.192T5 5.616v12.769q0 .23.192.423t.423.192M5 5v14zm2.616 4.192h6q.413 0 .706-.293q.294-.293.294-.707t-.294-.706q-.293-.294-.706-.294h-6q-.414 0-.707.294t-.293.706t.293.707t.707.293"/></svg>',accordionContent:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M4.616 19q-.691 0-1.153-.462T3 17.384V6.616q0-.691.463-1.153T4.615 5h14.77q.69 0 1.152.463T21 6.616v10.769q0 .69-.463 1.153T19.385 19zm0-1h14.769q.23 0 .423-.192t.192-.424V6.616q0-.231-.192-.424T19.385 6H4.615q-.23 0-.423.192T4 6.616v10.769q0 .23.192.423t.423.192M4 18V6zm2.23-2.116h11.54q.213 0 .356-.143t.143-.357t-.143-.356t-.357-.144H6.231q-.214 0-.357.144q-.143.143-.143.357q0 .213.143.356t.357.144m0-3.385h11.538q.214 0 .357-.143t.143-.357t-.143-.357t-.357-.143H6.231q-.214 0-.357.143T5.731 12t.143.357t.357.143m0-3.384H14q.214 0 .357-.144q.143-.143.143-.356q0-.214-.143-.357T14 8.116H6.23q-.213 0-.356.143t-.143.357t.143.356t.357.144"/></svg>',accordionMarker:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="m12 15.596l3.173-3.192H8.827zM5.616 20q-.672 0-1.144-.472T4 18.385V5.615q0-.67.472-1.143Q4.944 4 5.616 4h12.769q.67 0 1.143.472q.472.472.472 1.144v12.769q0 .67-.472 1.143q-.472.472-1.143.472zM5 9v9.385q0 .23.192.423t.423.192h12.77q.23 0 .423-.192t.192-.423V9z"/></svg>',caret:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m7.4 8.6 4.6 4.6 4.6-4.6L18 10l-6 6-6-6 1.4-1.4Z"/></svg>',eye:'<svg viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.7 7.6 1 12a11.8 11.8 0 0 0 22 0c-1.7-4.4-6-7.5-11-7.5Z"/></svg>'},H=(e,t)=>{const{toolbarIconOpen:n=v.eye}=t,s=e.is(p)?e:e.closestType(p);if(!n||!s)return;const{toolbar:c}=e,i={id:"accordion-toggle-open",label:n,command:()=>s.toggleOpen()};!c.find(m=>m.id===i.id)&&(c==null||c.unshift(i))},J=(e,t)=>{const{Components:n,Blocks:s}=e,{block:c={}}=t,i="Accordion",d=`${C}${p}`,m=function(a={}){const r=this,o=()=>{const{clsMarkerOpen:l}=a,f=r.querySelector('[data-type-role="accordion-marker"]');!f||!l||(r.open?f.classList.add(l):f.classList.remove(l))};r.addEventListener("toggle",()=>{o(),r.dispatchEvent(new CustomEvent("details-toggle",{bubbles:!0}))}),o()};return n.addType(p,{block:c&&{label:i,media:v.accordion,category:"Extra",select:!0,...c},isComponent:A(p),extendFn:["initToolbar"],model:{defaults:{tagName:"details",name:i,classes:d,emptyState:!0,clsMarkerOpen:S,attributes:{[T]:p},droppable:O(u,h),components:[{type:u},{type:h}],"script-props":["clsMarkerOpen"],script:m,traits:[{type:"checkbox",name:"open",label:"Open"}],styles:`
          .${d}::details-content {
            opacity: 0;
            block-size: 0;
            overflow: hidden;
            transform: translateY(-5px);
            transition-property: opacity, transform, block-size, content-visibility;
            transition-behavior: normal, normal, normal, allow-discrete;
            transition-timing-function: ease-in-out;
            transition-duration: 0.2s;
          }

          .${d}[open]::details-content {
            opacity: 1;
            transform: translateY(0);
            block-size: auto;
          }
        `},toggleOpen(){this.addAttributes({open:!this.getAttributes().open})},initToolbar(){H(this,t)}}}),()=>{s.remove(p),n.removeType(p)}},Q=e=>{const{Components:t}=e;return t.addType(h,{isComponent:A(h),model:{defaults:{name:"Accordion Content",removable:!1,copyable:!1,draggable:!1,emptyState:!0,classes:Z,icon:v.accordionContent,attributes:{[T]:h},components:"<div>Accordion content</div>"}}}),()=>{t.removeType(h)}},X=(e,t)=>{const{Components:n,Blocks:s}=e,{blockGroup:c={}}=t,i="Accordion Group",d=function(a={}){if(!a.single)return;const r=this;r.addEventListener("details-toggle",o=>{const l=o.target;if(!a.single||!l||!l.open)return;r.querySelectorAll('[data-type-role="accordion"]').forEach(g=>{l!==g&&g.open&&(g.open=!1)})})},m=(a={})=>({type:p,attributes:{open:a.open},components:[{type:u,components:[`<div>${a.header}</div>`,{type:y}]},{type:h,components:`<div>${a.content}</div>`}]});return n.addType(q,{block:c&&{label:i,media:v.accordionGroup,category:"Extra",select:!0,...c},isComponent:A(q),model:{defaults:{name:i,attributes:{[T]:q},droppable:O(p),single:!0,emptyState:!0,components:Array(3).fill(0).map((a,r)=>m({open:r===0,header:`Accordion header ${r+1}`,content:`Accordion content ${r+1}`})),traits:[{type:"checkbox",name:"single",changeProp:!0,tip:"Only one accordion can be open at a time",label:"Single open"}],"script-props":["single"],script:d}}}),()=>{s.remove(q),n.removeType(q)}},ee=(e,t)=>{const{Components:n}=e;return n.addType(u,{isComponent:A(u),extendFn:["initToolbar"],model:{defaults:{tagName:"summary",name:"Accordion Header",removable:!1,copyable:!1,draggable:!1,emptyState:!0,icon:v.accordionHeader,classes:M,attributes:{[T]:u},components:["<div>Accordion header</div>",{type:y}],styles:`
          summary {
            list-style: none;
          }
          .${M} {
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
          }
        `},initToolbar(){H(this,t)}}}),()=>{n.removeType(u)}},te=e=>{const{Components:t}=e;return t.addType(y,{extend:"icon",isComponent:A(y),model:{defaults:{name:"Accordion Marker",icon:v.accordionMarker,classes:k,attributes:{[T]:y},components:v.caret,droppable:!1,draggable:Y(u),styles:`
          .${k} {
            min-width: 24px;
            width: 24px;
            height: 24px;
            transition: transform 0.2s ease-in-out;
          }
          .${S} {
            transform: rotateZ(180deg);
          }
        `}}}),()=>{t.removeType(y)}},ne="accordionComponent",oe=b.startup,se=function(e,t={}){const n=[J(e,t),X(e,t),ee(e,t),te(e),Q(e)];W({editor:e,licenseKey:t.licenseKey,plan:oe,pluginName:ne,cleanup:()=>{n.forEach(s=>s())}})},ce=R(se);module.exports=ce;
