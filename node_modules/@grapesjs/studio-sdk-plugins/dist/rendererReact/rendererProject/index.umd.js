(function(d,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],a):(d=typeof globalThis<"u"?globalThis:d||self,a(d.StudioSdkPlugins_rendererReactProject={},d.jsxRuntime,d.React))})(this,function(d,a,y){"use strict";var g=(s=>(s.NoPagesFound="noPagesFound",s.PageNotFound="pageNotFound",s.NoFramesFound="noFramesFound",s.MissingRootComponent="missingRootComponent",s.ComponentNotFound="componentNotFound",s))(g||{});function k(s){const{config:t,errorType:e}=s,r=t==null?void 0:t.errorComponent;return r?a.jsx(r,{...s}):a.jsxs("div",{children:["Error: ",e]})}function b(s){const t={};let e=!1;for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)){const n=s[r];if(typeof n=="string"||typeof n=="number"){const o=r.includes("-")?r.replace(/-([a-z])/g,i=>i[1].toUpperCase()):r;t[o]=n,e=!0}}return e?t:void 0}function O(s){const t={};return s.split(";").forEach(e=>{if(!e.trim())return;const r=e.indexOf(":");if(r>0){const n=e.substring(0,r).trim(),o=e.substring(r+1).trim();if(n&&o){const i=n.replace(/-([a-z])/g,l=>l[1].toUpperCase());t[i]=o}}}),Object.keys(t).length>0?t:void 0}function D(s){if(s){if(typeof s=="object"&&!Array.isArray(s))return b(s);if(typeof s=="string"){let t=O(s);if(!t)try{const e=JSON.parse(s);typeof e=="object"&&e!==null&&!Array.isArray(e)&&(t=b(e))}catch(e){console.error("Failed to parse style string as JSON",e)}return t}if(Array.isArray(s)){const t={};return s.forEach(e=>{if(typeof e=="object"&&e!==null){const r=e.name||e.property,n=e.value;if(typeof r=="string"&&r&&n!==void 0&&n!==""){const o=r.replace(/-([a-z])/g,i=>i[1].toUpperCase());t[o]=n}}}),Object.keys(t).length>0?t:void 0}}}function W(s){return N[s]?N[s]:s.includes("-")?s.replace(/-([a-z])/g,(t,e)=>e.toUpperCase()):s}function B(s){var e;const t={};for(const[r,n]of Object.entries(s))if(r==="style")t.style=D(n);else if(r.startsWith("data-"))t[r]=n;else{const o=W(r);((e=s.xmlns)==null?void 0:e.includes("svg"))||s.viewBox!==void 0||s.d!==void 0||I.has(o)||o.startsWith("svg")?t[o]=n:!M.has(o)&&!o.startsWith("on")&&!o.startsWith("aria-")&&!o.startsWith("data-")?t[r]=n:t[o]=n}return t}const M=new Set(["className","id","style","href","src","alt","title","target","rel","type","name","value","placeholder","onClick","onChange","onSubmit","onBlur","onFocus","disabled","readOnly","checked","selected","multiple","width","height","maxLength","min","max","step","rows","cols","autoComplete","autoFocus","required","spellCheck","tabIndex","aria-label","aria-labelledby","aria-describedby","role"]),I=new Set(["x","y","d","cx","cy","r","rx","ry","x1","x2","y1","y2","points","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeDasharray","strokeOpacity","fillOpacity","fillRule","clipRule","transform","viewBox","preserveAspectRatio","pathLength","vectorEffect","dominantBaseline","alignmentBaseline","textAnchor","fontFamily","fontSize","fontStyle","fontWeight","textDecoration","baselineShift","opacity","mask","clipPath","overflow","pointerEvents"]),N={class:"className",for:"htmlFor","http-equiv":"httpEquiv","accept-charset":"acceptCharset","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-linejoin":"strokeLinejoin","fill-rule":"fillRule","clip-rule":"clipRule","stroke-miterlimit":"strokeMiterlimit","stroke-dasharray":"strokeDasharray","stroke-opacity":"strokeOpacity","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","text-anchor":"textAnchor"};function z(s,t,e){const{id:r,type:n}=s,o=r||void 0;let i;return r?i=r:t?i=`${t}-${e??0}`:n==="head"?i="gjs-head":t==="gjs-head"?i=`${t}-${e??0}`:i=`gjs-${n}`,{key:i,nodeId:o}}const F=function s(t){var T;const{component:e,config:r,children:n,parentId:o,index:i}=t;if(!e)return null;const{type:l,content:c}=e;if(l==="textnode")return c;const u=(T=r==null?void 0:r.components)==null?void 0:T[l],f=(u==null?void 0:u.component)||e.tagName||"div",h=e.attributes,{key:S,nodeId:$}=z(e,o,i),j=!!(u!=null&&u.component),C=B(h);j&&Object.keys(C).forEach(A=>{const p=C[A];typeof p=="string"&&!isNaN(Number(p))&&p.trim()!==""&&(C[A]=Number(p))});const{components:w}=e,R=[...w.length?w.map((A,p)=>a.jsx(s,{config:r,component:A,parentId:S,index:p},`${A.id}-${p}`)):[c],n],E={...C,...$?{id:$}:{}};return j?a.jsx(f,{...E,children:R},S):y.createElement(f,{...E,key:S},e.isVoid?null:R)};function L(s){var c;const{config:t,root:e,css:r}=s,n=(t==null?void 0:t.rootComponent)||y.Fragment,o=((c=e.docEl)==null?void 0:c.tagName)||"html",i=(t==null?void 0:t.headAfter)||y.Fragment,l=(t==null?void 0:t.bodyAfter)||y.Fragment;return a.jsx(o,{children:a.jsxs(n,{children:[a.jsxs(F,{component:e.head,config:t,children:[a.jsx("style",{children:`${r}`}),a.jsx(i,{})]}),a.jsx(F,{component:e,config:t,children:a.jsx(l,{})})]})})}class v{constructor(t){this.data=t}get id(){var t;return(t=this.data.attributes)==null?void 0:t.id}get type(){return this.data.type||"default"}get tagName(){const{type:t}=this;return t==="svg"?"svg":t==="image"?"img":t==="linkBox"||t==="link"?"a":t==="head"?"head":t==="wrapper"?"body":this.data.tagName||""}get isVoid(){return this.tagName==="img"?!0:!!this.data.void}get attributes(){const t={...this.data.attributes},{classes:e}=this;e.length&&(t.class=e.join(" "));function r(n,o){return Object.prototype.hasOwnProperty.call(n,o)}return r(t,"id")||(t.id=this.id),t}get content(){return this.data.content||""}get components(){return(this.data.components||[]).map(t=>new v(t))}get head(){return new v(this.data.head||{tagName:"head"})}get docEl(){return this.data.docEl}get classes(){return(this.data.classes||[]).map(e=>typeof e=="string"?e:e.name)}}class _{constructor(t){this.data=t}get component(){return this.data.component?new v(this.data.component):null}}class U{constructor(t){this.data=t}get id(){return this.data.id}get frames(){return(this.data.frames||[]).map(t=>new _(t))}}function x(s){const t=/(-?\d*\.?\d+)\w{0,}/.exec(s);return t?parseFloat(t[1]):Number.MAX_VALUE}class q{constructor(t){this.rules=t}getAll(){return this.rules}getRulesByGroup(t){return this.rules.filter(e=>e.group===t)}getAtRule(t){const{atRuleType:e,mediaText:r}=t,n=e?`@${e}`:r?"@media":"";return n+(r&&n?` ${r}`:"")}selectorsToString(t,e={}){const r=[],{state:n,selectorsAdd:o,selectors:i=[]}=t,l=i.map(u=>this.getFromSelectorName(u)).join(""),c=n&&!e.skipState?`:${n}`:"";return l&&r.push(`${l}${c}`),o&&!e.skipAdd&&r.push(o),r.join(", ")}getFromSelectorName(t=""){return`${t.startsWith("#")?"":"."}${t}`}styleToString(t={}){const e=[],{style:r={},important:n}=t;for(const o in r){const i=Array.isArray(n)?n.indexOf(o)>=0:n;if(o.substring(0,2)==="__")continue;const c=r[o];(Array.isArray(c)?c:[c]).forEach(m=>{const f=`${m}${i?" !important":""}`;f&&e.push(`${o}:${f};`)})}return e.join("")}getDeclaration(t){const{singleAtRule:e}=t,r=this.selectorsToString(t),n=this.styleToString(t);let o="";return(r||e)&&n&&(o=e?n:`${r}{${n}}`),o}buildFromRule(t){let e="";const r=this.selectorsToString(t),{selectorsAdd:n,singleAtRule:o}=t;if(r||n||o){const i=this.getDeclaration(t);i&&(e+=i)}return e}sortMediaObject(t={}){const e=[];for(const r in t){const n=t[r];e.push({key:r,value:n})}return e.sort((r,n)=>{const o=[r.key,n.key].every(c=>c.indexOf("min-width")!==-1),i=o?r.key:n.key,l=o?n.key:r.key;return x(i)-x(l)})}getCssAsString(){if(!this.rules||!this.rules.length)return"";const{rules:t}=this,e={},r=[];return t.forEach(n=>{const o=this.getAtRule(n);if(o){const i=e[o];i?i.push(n):e[o]=[n];return}r.push(this.buildFromRule(n))}),this.sortMediaObject(e).forEach(n=>{let o="";const i=n.key;n.value.forEach(c=>{const u=this.buildFromRule(c);c.singleAtRule?r.push(`${i}{${u}}`):o+=u}),o&&r.push(`${i}{${o}}`)}),r.join(`
`)}}class V{constructor(t){this.list=t}getAll(){return this.list}}class J{constructor(t){this.pages=t.map(e=>new U(e))}getAll(){return this.pages}}class K{constructor(t){this.Css=new q(t.styles||[]),this.Pages=new J(t.pages||[]),this.DataSources=new V(t.dataSources||[])}}function P(s,t){if(s.id===t)return s;for(const e of s.components){const r=P(e,t);if(r)return r}return null}const G=function(s){var f;const{projectData:t,config:e={},pageId:r,componentId:n}=s,o=new K(t),i=o.Css.getCssAsString(),l=o.Pages.getAll();if(!l.length)return a.jsx(k,{...s,errorType:g.NoPagesFound});const c=r?l.find(h=>h.id===r):l[0];if(!c)return a.jsx(k,{...s,errorType:g.PageNotFound});const{frames:u}=c;if(!u.length)return a.jsx(k,{...s,errorType:g.NoFramesFound});const m=(f=u[0])==null?void 0:f.component;if(!m)return a.jsx(k,{...s,errorType:g.MissingRootComponent});if(n){const h=P(m,n);if(!h)return a.jsx(k,{...s,errorType:g.ComponentNotFound});if(h){const S=e.rootComponent||y.Fragment;return a.jsxs(S,{children:[a.jsx("style",{children:`${i}`}),a.jsx(F,{component:h,config:e})]})}return null}return a.jsx(L,{config:e,root:m,css:i})};d.RenderProject=G,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
